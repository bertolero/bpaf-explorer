<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping auto-import="false"
                   package="org.jboss.bpm.monitor.model.bpaf" default-access="field">

    <class name="Event" table="BPAF_EVENT">

        <id name="eventID" column="eventID">
            <generator class="native" />
        </id>

        <property name="serverID" column="serverID"/>

        <property name="processDefinitionID" column="processDefinitionID" not-null="true"/>
        <property name="processInstanceID" column="processInstanceID" not-null="true"/>
        <property name="processName" column="processName" />

        <property name="activityDefinitionID" column="activityDefinitionID"/>
        <property name="activityInstanceID" column="activityInstanceID"/>
        <property name="activityName" column="activityName"/>

        <property name="timestamp" column="timestamp" not-null="true"/>

        <component name="eventDetails">

            <property name="currentState" column="currentState" not-null="true">
                <type name="org.jboss.bpm.monitor.model.hibernate.StateUserType">
                    <param name="enumClass">org.jboss.bpm.monitor.model.bpaf.State</param>
                </type>
            </property>
            <property name="previousState" column="previousState">
                <type name="org.jboss.bpm.monitor.model.hibernate.StateUserType">
                    <param name="enumClass">org.jboss.bpm.monitor.model.bpaf.State</param>
                </type>
            </property>
        </component>

    </class>

    <class name="Tuple" table="BPAF_EVENT_DATA">

        <id name="id" column="id">
            <generator class="native" />
        </id>

        <property name="name" column="name"/>
        <property name="value" column="value"/>

        <many-to-one name="event" class="Event" column="eventID"/>
    </class>

    <!-- ### QUERIES ######################################################## -->

    <!--query name="findTasks">
        <![CDATA[
         select task
         from org.jbpm.pvm.internal.task.TaskImpl as task
        ]]>
    </query-->

</hibernate-mapping>

        